(this["webpackJsonpweather-forecast"]=this["webpackJsonpweather-forecast"]||[]).push([[0],{231:function(e,t,n){"use strict";n.r(t);var a,c=n(4),r=n(0),i=n(25),s=n(265),o=n(266),u=n(19),l=n(264),d=n(267),p=n(6),j=n(3);!function(e){e.Initial="Initial",e.Pending="Pending",e.Failure="Failure",e.Success="Success"}(a||(a={}));var f,b=function(){return{status:a.Initial}},m=function(e){return{status:a.Pending,prevData:e}},h=function(e){return{status:a.Success,data:e}},g=function(e){return{status:a.Failure,err:e}},O=function(e){return e.status===a.Pending},x=function(e){return e.status===a.Success},v=function(e){return e.status===a.Failure},y=function(e){return x(e)?p.d(e.data):O(e)?e.prevData:p.c},w=n(270),S=n(248),N=n(207),D=n(247),I=n(249),k=n(273),W=n(250),E=n(251),F=n(42),_=n(269),P=n(274),B=n(201),C=n(246),M=n(9),T=n(12),R=function(e,t){return P.a.getJSON(e).pipe(C.a((function(e){return Object(B.a)(g(T.k(e)))})),F.a((function(e){return Object(j.e)(t.decode(e),T.d((function(e){return g(new Error(M.b(e)))}),(function(e){return h(e)})))})),_.a(m(p.c)))},J=n(36),A=n(208),G=n.p+"static/media/cloudy.24f9a474.svg",$=n.p+"static/media/cloudy-day-1.213f9a41.svg",q=(n.p,n.p+"static/media/cloudy-day-3.2164d3c4.svg"),z=n.p+"static/media/cloudy-night-1.4e6a9fde.svg",H=(n.p,n.p+"static/media/cloudy-night-3.e2327d50.svg"),U=n.p+"static/media/day.c33ef664.svg",L=n.p+"static/media/night.6cf4adcd.svg",Z=(n.p,n.p,n.p+"static/media/rainy-3.8c33eccc.svg"),K=(n.p,n.p+"static/media/rainy-5.a8183a99.svg"),Q=n.p+"static/media/rainy-6.130d6250.svg",V=(n.p,n.p,n.p,n.p+"static/media/snowy-3.b5422f54.svg"),X=(n.p,n.p+"static/media/snowy-5.c90a1604.svg"),Y=(n.p,n.p+"static/media/thunder.19ff3c30.svg"),ee=n.p+"static/media/amcharts.38563fdb.svg",te=n.p+"static/media/github.401645e3.svg",ne=n.p+"static/media/mapbox.c75a8021.svg",ae=n.p+"static/media/open-weather.4595304d.png",ce=n(202),re=J.a(ce.a)((function(e,t){var n=Object(u.a)(t,2),a=n[0],c=n[1];return 0===e?"?".concat(a,"=").concat(c):"&".concat(a,"=").concat(c)})),ie=M.k(M.f,M.f),se=M.l({id:M.i,place_name:M.i,center:ie}),oe=Object(j.e)(M.l({type:M.d("FeatureCollection"),features:M.a(se)}),M.e((function(e){return e.features}))),ue=Object(j.e)(M.f,M.e((function(e){return Math.round(e)}))),le=Object(j.e)(M.d("01d","01n","02d","02n","03d","03n","04d","04n","09d","09n","10d","10n","11d","11n","13d","13n","50d","50n"),M.e((function(e){switch(e){case"01d":return U;case"01n":return L;case"02d":return $;case"02n":return z;case"03d":return q;case"03n":return H;case"04d":case"04n":return G;case"09d":return Z;case"09n":return K;case"10d":case"10n":return Q;case"11d":case"11n":return Y;case"13d":return V;case"13n":return X;case"50d":case"50n":return G}}))),de=M.l({icon:le,description:Object(j.e)(M.i,M.e((function(e){return(t=e).charAt(0).toUpperCase()+t.slice(1);var t})))}),pe=Object(j.e)(M.l({temp:ue,humidity:M.f,wind_speed:M.f,wind_deg:M.f,weather:(f=de,Object(j.e)(M.a(f),M.h(J.c,"non empty array")))}),M.e((function(e){return{temp:e.temp,humidity:e.humidity,weather:A.a(e.weather),wind:(t=e.wind_speed,n=e.wind_deg,"".concat(function(e){switch(!0){case e<22.5:return"N";case e<67.5:return"NE";case e<112.5:return"E";case e<157.5:return"SE";case e<202.5:return"S";case e<247.5:return"SW";case e<292.5:return"W";case e<373.5:return"NW";default:return"N"}}(n)," ").concat(t," m/s"))};var t,n}))),je=Object(j.e)(M.l({dt:M.f,temp:M.l({day:ue,night:ue})}),M.e((function(e){return{temp:e.temp,day:(t=e.dt,new Intl.DateTimeFormat("en-US",{weekday:"short"}).format(new Date(1e3*t)))};var t}))),fe=M.l({current:pe,daily:Object(j.e)(M.a(je),M.g((function(e){return e.length>=4?M.j(e):M.c(e,"array with at least 4 elements")})))}),be=function(){var e=new w.a,t=new w.a,n=t.pipe(D.a((function(e){return""!==e}))),a=t.pipe(D.a((function(e){return""===e})));return{search:function(e){return t.next(e.replace(/,+/g," ").trim())},selectPlace:function(t){return e.next(t)},searchResult$:Object(S.a)(a.pipe(I.a(h([]))),n.pipe(I.a(m(p.c))),n.pipe(k.a(400,N.b,{trailing:!0}),W.a((function(e){return R(function(e){var t=re([["access_token","pk.eyJ1IjoiZWdvcjk5MDA5NSIsImEiOiJja2s3MTMzam8wODk2MnBvMnhqNm82eGI0In0.a1vbTvbiFqOg-2BSc7rz6A"],["types","place,postcode"],["limit","5"]]);return"https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json").concat(t)}(e),oe)})))).pipe(E.a((function(e,t){return O(t)?m(y(e)):v(t)?h([]):t}),b())),forecastData$:e.pipe(k.a(1200),W.a((function(e){return R(function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return"https://api.openweathermap.org/data/2.5/onecall"+re([["lat",String(a)],["lon",String(n)],["appid","343bca3fc0c1274262e1e407526c5b3f"],["units","metric"],["exclude","minutely,hourly"]])}(e.center),fe).pipe(F.a((t=function(t){return{place:e,forecast:t}},function(e){return x(e)?h(t(e.data)):O(e)?m(Object(j.e)(e.prevData,p.b(t))):e})));var t})),_.a(b()))}}(),me=n(252),he=n(26),ge=n(253),Oe=n(254),xe=me.a({root:{flexGrow:1}}),ve=function(){var e=xe();return Object(c.jsx)("div",{className:e.root})},ye=me.a((function(e){return{root:{background:he.a.grey[900],padding:e.spacing(4,6)},logo:{display:"block",height:32}}})),we=r.memo((function(){var e=ye(),t=[Object(j.f)("https://mapbox.com",ne,"mapbox logo"),Object(j.f)("https://openweathermap.org",ae,"OpenWeather logo"),Object(j.f)("https://amcharts.com",ee,"amCharts logo")];return Object(c.jsx)(ge.a,{className:e.root,component:"footer",position:"static",children:Object(c.jsxs)(Oe.a,{container:!0,spacing:3,children:[t.map((function(t){var n=Object(u.a)(t,3),a=n[0],r=n[1],i=n[2];return Object(c.jsx)(Oe.a,{item:!0,children:Object(c.jsx)("a",{href:a,target:"_blank",rel:"noopener noreferrer",children:Object(c.jsx)("img",{className:e.logo,src:r,alt:i})})},a)})),Object(c.jsx)(ve,{}),Object(c.jsx)(Oe.a,{item:!0,children:Object(c.jsx)("a",{href:"https://github.com/egorgrodno/weather-forecast",rel:"noopener noreferrer",children:Object(c.jsx)("img",{className:e.logo,src:te,alt:"GitHub logo"})})})]})})})),Se=n(257),Ne=n(258),De=n(255),Ie=function(){return{status:"initial"}},ke=function(e){return{status:"entering",curr:e}},We=n(233),Ee=n(256),Fe=me.a((function(e){return{img:{display:"block",width:"100%"},temp:{padding:e.spacing(5.5,0)},day:{textAlign:"center"},dayLabel:{textTransform:"uppercase"},daySep:{margin:e.spacing(.5,0)}}})),_e=function(e){var t=Fe();return Object(c.jsxs)(We.a,{children:[Object(c.jsx)(d.a,{component:"header",px:4,pt:3,children:Object(c.jsxs)(Oe.a,{container:!0,justify:"space-between",alignItems:"center",wrap:"nowrap",children:[Object(c.jsxs)(Oe.a,{item:!0,zeroMinWidth:!0,children:[Object(c.jsx)(De.a,{variant:"h5",noWrap:!0,children:e.place.place_name}),Object(c.jsx)(De.a,{variant:"subtitle1",noWrap:!0,children:e.forecast.current.weather.description})]}),Object(c.jsxs)(Oe.a,{item:!0,children:[Object(c.jsx)(De.a,{variant:"body1",color:"textSecondary",noWrap:!0,children:e.forecast.current.wind}),Object(c.jsxs)(De.a,{variant:"body1",color:"textSecondary",noWrap:!0,children:["Humidity ",e.forecast.current.humidity,"%"]})]})]})}),Object(c.jsx)(d.a,{children:Object(c.jsxs)(Oe.a,{container:!0,justify:"space-between",alignItems:"center",wrap:"nowrap",children:[Object(c.jsx)(Oe.a,{item:!0,xs:6,children:Object(c.jsx)("img",{className:t.img,src:e.forecast.current.weather.icon,alt:e.forecast.current.weather.description})}),Object(c.jsx)(Oe.a,{item:!0,xs:6,children:Object(c.jsxs)(De.a,{className:t.temp,variant:"h1",children:[e.forecast.current.temp,"\xb0"]})})]})}),Object(c.jsx)(d.a,{component:"footer",pb:3,children:Object(c.jsx)(Oe.a,{container:!0,justify:"space-between",alignItems:"center",wrap:"nowrap",children:e.forecast.daily.slice(1,6).map((function(e,n){return Object(c.jsxs)(r.Fragment,{children:[n>0&&Object(c.jsx)(Ee.a,{className:t.daySep,orientation:"vertical",flexItem:!0}),Object(c.jsxs)(Oe.a,{className:t.day,item:!0,xs:3,children:[Object(c.jsx)(De.a,{className:t.dayLabel,variant:"body2",align:"center",gutterBottom:!0,noWrap:!0,children:e.day}),Object(c.jsx)(De.a,{variant:"body2",align:"center",noWrap:!0,children:e.temp.day}),Object(c.jsx)(De.a,{variant:"body2",color:"textSecondary",align:"center",noWrap:!0,children:e.temp.night})]})]},n)}))})})]})},Pe=function(e){var t=r.useState(Ie),n=Object(u.a)(t,2),i=n[0],s=n[1],o=function(){return s(function(e){switch(e.status){case"initial":case"entered":return e;case"leaving":return ke(e.next);case"entering":return{status:"entered",curr:e.curr}}}(i))};return r.useEffect((function(){if(e.forecastData.status!==a.Initial)switch(i.status){case"initial":return s(ke(e.forecastData));case"leaving":case"entering":case"entered":return s((t=i.curr,n=e.forecastData,{status:"leaving",curr:t,next:n}))}var t,n}),[e.forecastData]),"initial"===i.status?null:Object(c.jsx)(Se.a,{in:"leaving"!==i.status,onEntered:o,onExited:o,children:Object(c.jsx)("div",{children:Object(c.jsx)(Ce,{forecastData:i.curr})})})},Be=me.a({loader:{height:370,display:"flex",alignItems:"center",justifyContent:"center"}}),Ce=function(e){var t=Be();switch(e.forecastData.status){case a.Initial:return null;case a.Pending:return Object(c.jsx)("div",{className:t.loader,children:Object(c.jsx)(Ne.a,{})});case a.Failure:return Object(c.jsx)(De.a,{color:"error",children:"Network request failed, try again later."});case a.Success:return Object(c.jsx)(_e,{place:e.forecastData.data.place,forecast:e.forecastData.data.forecast})}},Me=n(268),Te=n(261),Re=n(263),Je=n(272),Ae=n(260),Ge=n(262),$e=n(72),qe=n(259),ze=function(e){var t=$e.a(),n=r.useRef(),a=r.useState(!1),i=Object(u.a)(a,2),s=i[0],o=i[1];return r.useEffect((function(){e.open?function(e,t,n){e.current=setTimeout((function(){e.current=void 0,t()}),n)}(n,(function(){return o(!0)}),t.transitions.duration.shortest):(!function(e){void 0!==e.current&&(clearTimeout(e.current),e.current=void 0)}(n),o(!1))}),[e.open]),Object(c.jsx)(qe.a,{in:e.open,children:Object(c.jsx)(Se.a,{in:s,children:e.children})})},He=me.a((function(e){return{root:{position:"relative",height:60},inputRoot:{padding:e.spacing(.75,.5,.25),display:"flex",alignItems:"center"},input:{flex:1},searchIcon:{margin:e.spacing(1.5,2)},clearButton:{padding:e.spacing(1),margin:e.spacing(0,1,0,.5)},suggestions:{paddingTop:0},suggestion:{transition:"none"}}})),Ue=function(e){var t=He(),n=r.useState(""),a=Object(u.a)(n,2),i=a[0],s=a[1],o=r.useState(!1),l=Object(u.a)(o,2),d=l[0],f=l[1],b=r.useState(!1),m=Object(u.a)(b,2),h=m[0],g=m[1],v=O(e.result)&&p.a(e.result.prevData)&&J.c(e.result.prevData.value),w=""!==i&&(v||x(e.result)),S=function(){g(!0)},N=function(){g(!1)},D=function(){s(""),e.onSearch(i)};return w&&d&&!h&&S(),Object(c.jsx)("div",{className:t.root,children:Object(c.jsxs)(We.a,{elevation:d?3:1,children:[Object(c.jsxs)("div",{className:t.inputRoot,children:[Object(c.jsx)(Ae.a,{className:t.searchIcon}),Object(c.jsx)(Me.a,{className:t.input,placeholder:"Seach location",value:i,onFocus:function(){f(!0),w&&S()},onBlur:function(){f(!1),N()},onChange:function(t){return function(t){""===t&&N(),s(t),e.onSearch(t)}(t.target.value)}}),""!==i&&Object(c.jsx)(Te.a,{className:t.clearButton,onClick:D,children:Object(c.jsx)(Ge.a,{})})]}),Object(c.jsx)(ze,{open:h,children:Object(c.jsx)(Re.a,{className:t.suggestions,children:Object(j.e)(y(e.result),p.b((function(n){return Object(c.jsxs)(c.Fragment,{children:[J.b(n)&&""!==i&&Object(c.jsx)(Je.a,{className:t.suggestion,disabled:O(e.result),children:"No results"}),n.map((function(n){return Object(c.jsx)(Je.a,{className:t.suggestion,button:!0,disabled:O(e.result),onClick:function(){return function(t){D(),e.onPlaceSelect(t)}(n)},children:n.place_name},n.id)}))]})})),p.e)})})]})})},Le=function(){var e=r.useState(b()),t=Object(u.a)(e,2),n=t[0],a=t[1],i=r.useState(b()),s=Object(u.a)(i,2),o=s[0],p=s[1];return r.useEffect((function(){var e=be.searchResult$.subscribe((function(e){a(e)})),t=be.forecastData$.subscribe((function(e){p(e)}));return function(){e.unsubscribe(),t.unsubscribe()}}),[]),r.useEffect((function(){be.selectPlace({id:"initial_place",place_name:"Grodno, Belarus",center:[23.81667,53.66667]})}),[]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(l.a,{maxWidth:"xs",children:[Object(c.jsx)(d.a,{mt:8,mb:1.5,children:Object(c.jsx)(Ue,{result:n,onSearch:be.search,onPlaceSelect:be.selectPlace})}),Object(c.jsx)(Pe,{forecastData:o})]}),Object(c.jsx)(ve,{}),Object(c.jsx)(we,{})]})},Ze=n(206).a({palette:{primary:{main:he.a.blue[600]},text:{primary:"#4b5d6a",secondary:"#a1adb5"}},overrides:{MuiCssBaseline:{"@global":{"#root":{minHeight:"100vh",display:"flex",flexDirection:"column"}}}}});i.render(Object(c.jsx)(r.StrictMode,{children:Object(c.jsxs)(s.a,{theme:Ze,children:[Object(c.jsx)(o.a,{}),Object(c.jsx)(Le,{})]})}),document.getElementById("root"))}},[[231,1,2]]]);
//# sourceMappingURL=main.b6c5a435.chunk.js.map